<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Update Site - Loop Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Loop Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../requirements/">Requirements</a>
                </li>
            
            
            
                <li >
                    <a href="../../installing/">Installing</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Algorithm <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../algorithm/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../algorithm/prediction/">Glucose Prediction</a>
</li>

                    
                        
<li >
    <a href="../../algorithm/temp_basal/">Temp Basal Adjustments</a>
</li>

                    
                        
<li >
    <a href="../../algorithm/bolus/">Bolus Recommendations</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nightscout <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../new_user/">Setup New Site</a>
</li>

                    
                        
<li class="active">
    <a href="./">Update Site</a>
</li>

                    
                        
<li >
    <a href="../azure_migration/">Azure to Heroku</a>
</li>

                    
                        
<li >
    <a href="../mlab_cleanup/">mLab</a>
</li>

                    
                        
<li >
    <a href="../troubleshooting/">Loop Pill</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../new_user/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../azure_migration/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#updating-nightscout-site">UPDATING NIGHTSCOUT SITE</a></li>
        
            <li><a href="#updating-your-repository-in-github">Updating your repository in GitHub</a></li>
        
            <li><a href="#new-loopers-variables">New Loopers Variables</a></li>
        
            <li><a href="#event-history">EVENT HISTORY</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="updating-nightscout-site">UPDATING NIGHTSCOUT SITE</h1>
<p>If you are new to Loop and haven’t updated your NS site since before December 1, 2016, you will want to update your NS site.  You can run either the "master" or "dev" branches of cgm-remote-monitor with Loop.  To check what version your Nightscout site is running, go to your Nightscout site and pull open the site settings by clicking on the three horizontal lines at the top right of the screen.  Scroll down and see if you are running 0.9.2-dev-20161201 or newer for "dev" branch.  Notice the “dev” branch is date stamped 0.9.x-dev-YYYMMDD; or you’ll see version 0.9.2 for "master" branch deployments.</p>
<p>If you are a current NS user and simply want to update your site, this procedure will work as well.</p>
<h2 id="updating-your-repository-in-github">Updating your repository in GitHub</h2>
<ol>
<li>Copy, paste, and goto the one of the following links depending on which branch of cgm-remote-monitor you are currently running (replace "yourgithubname" with your actual GitHub user name)</li>
</ol>
<p>For dev branch deployments:</p>
<p>https://github.com/yourgithubname/cgm-remote-monitor/compare/dev...nightscout:dev</p>
<p>or for master branch deployments:</p>
<p>https://github.com/yourgithubname/cgm-remote-monitor/compare/master...nightscout:master</p>
<p><img alt="Compare changes" src="../img/compare_repo.jpg" /></p>
<p>Click the big green "create pull request" button. Another screen will appear, fill in a title and click button to create the pull request, and then you can "Merge Pull Request", and finally "confirm merge".
 
<img alt="Compare changes" src="../img/update1.jpg" />
<img alt="Compare changes" src="../img/update2.jpg" />
<img alt="Compare changes" src="../img/update3.jpg" /></p>
<p>If you don’t have your Heroku set-up to automatically update when your repository is updated, you may have to go into your Heroku “deploy” section and manually deploy your branch now that your repository has been updated.  Make sure you are connected to your GitHub cgm-remote-monitor repository.</p>
<p><img alt="Heroku Deployment screen" src="../img/deploy_branch.jpg" /></p>
<h2 id="new-loopers-variables">New Loopers Variables</h2>
<p>For new Loopers (but old Nightscout users), you will need to add some variables to your Heroku site to Loop.  </p>
<ol>
<li>Login to your Heroku site, select the “settings” tab near the top of the screen on your Heroku app.</li>
</ol>
<p><img alt="Settings in Heroku" src="../img/settings_heroku.jpg" /></p>
<ol>
<li>Click on “Reveal Config  Vars”.  Scroll down the bottom of the Config Vars lines until you find the last blank one.  You are going to add several additional lines of config vars for Loop use; the DEVICESTATUS_ADVANCED and ENABLE lines are required, the others just make Nightscout more useful when Looping.</li>
</ol>
<p><img alt="Loop add vars" src="../img/add_vars.jpg" /></p>
<dl>
<dt>DEVICESTATUS_ADVANCED</dt>
<dd>true</dd>

<dt>ENABLE</dt>
<dd>loop pump careportal bridge basal iob cob sage cage</dd>

<dt>SHOW_FORECAST</dt>
<dd>loop</dd>

<dt>PUMP_RETRO_FIELDS</dt>
<dd>battery reservoir clock status</dd>

<dt>PUMP_FIELDS</dt>
<dd>battery reservoir clock status</dd>

<dt>SHOW_FORECAST</dt>
<dd>loop</dd>

<dt>SHOW_PLUGINS</dt>
<dd>loop pump cob iob sage cage careportal</dd>

<dt>PUMP_ENABLE_ALERTS</dt>
<dd>true</dd>

<dt>PUMP_URGENT_BATT_U</dt>
<dd>30</dd>
(this is the pump battery percentage that will trigger a red, urgent alert in NS)

<dt>PUMP_URGENT_BATT_V</dt>
<dd>1.25</dd>
(this is the pump battery voltage that will trigger a red, urgent alert in NS)

<dt>PUMP_URGENT_RES</dt>
<dd>10</dd>
(this is the reservoir volume that will trigger a red, urgent alert in NS)

<dt>PUMP_URGENT_CLOCK</dt>
<dd>30

<dt>LOOP_ENABLE_ALERTS</dt>
<dd>true</dd>

<dt>LOOP_WARN</dt>
<dd>20</dd>
(this is the minutes since Loop last successfully looped, the t1d will have a similar notification at this time through the Loop app.  this will be a yellow alert in NS.)

<dt>LOOP_URGENT</dt>
<dd>60</dd>
(same as the alert above, but will be red in color and have a shorter snooze option)
</dl>

<ol>
<li>Click on “Open App” in the top right corner of your Heroku site.</li>
</ol>
<p><img alt="Open NS App" src="../img/open_app.jpg" /></p>
<ol>
<li>Click on the settings (those three horizontal lines in upper right corner).  Now check  that your basal render is selected to either default or icicle (personal preference for how the temp basals show as blue lines in NS site), check the boxes that you’d like pills showing for info on your NS site in the SHOW PLUGINS (usually all of them), and then press save.</li>
</ol>
<p><img alt="Settings for NS site" src="../img/settings_ns.jpg" /></p>
<ol>
<li>Double check that your NS Profile settings are current and that you have a basal profile entered, if you want to see the temp basals that Loop is setting.</li>
</ol>
<p>Your NIGHTSCOUT site is all set-up.  Congrats!</p>
<h2 id="event-history">EVENT HISTORY</h2>
<p>Don't forget to keep you Loop App's Preferred Source set to "Event History" if you want your NS site to smoothly integrate.  Preferred Source set to "Reservoir Volumes" will result in carbs not being uploaded and temp basals not being displayed.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>